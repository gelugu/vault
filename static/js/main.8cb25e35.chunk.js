(this.webpackJsonpvault=this.webpackJsonpvault||[]).push([[0],{51:function(e,t,c){"use strict";c.r(t);var n=c(6),r=c.n(n),a=c(35),o=c.n(a),u=c(15),s=c(29),i=c(9),b=c(0),l=c.n(b),j=c(3),O=c(10),d=c(39),f=c(22),p=c(23),v={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_VAULT_API_KEY,authDomain:"gelugu-vault.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_VAULT_DATABASE_URL,projectId:"gelugu-vault",storageBucket:"gelugu-vault.appspot.com",messagingSenderId:"887180943043",appId:"1:887180943043:web:25df0f6628a092f3de0c76",measurementId:"G-Y00RVNTE0X"},h=Object(d.a)(v),x=Object(p.b)(h),E=new p.a,S=function(){Object(p.c)(x,E).then((function(e){var t=p.a.credentialFromResult(e),c=t.accessToken,n=e.user;console.log(t,c,n)})).catch((function(e){var t=e.code,c=e.message,n=e.email,r=p.a.credentialFromError(e);console.log(t,c,n,r)}))},_=function(){Object(p.d)(x).then((function(){console.log("Loged out")})).catch((function(e){console.error(e)}))},k=Object(f.c)(h),g=function(){var e=Object(j.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(f.d)(k),e.abrupt("return",Object(f.b)(Object(f.a)(c,"users/".concat(x.currentUser.uid,"/").concat(btoa(t)))).then((function(e){if(e.exists())return atob(e.val().value);console.error("No data available")})).catch((function(e){console.error(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=c(11),m=function(){var e=Object(i.f)(),t=Object(n.useState)(""),c=Object(O.a)(t,2),r=c[0],a=c[1],o=Object(n.useState)(""),s=Object(O.a)(o,2),b=s[0],d=s[1],f=Object(n.useState)(u.f.text),p=Object(O.a)(f,2),v=p[0],h=p[1],E=Object(n.useState)(),k=Object(O.a)(E,2),m=k[0],T=k[1],A=Object(n.useState)(!1),y=Object(O.a)(A,2),R=y[0],w=y[1],L=Object(n.useCallback)((function(){var e=function(){return Math.floor(100*Math.random())};return{x:e(),y:e()}}),[]),P=Object(n.useCallback)((function(){d(""),a("")}),[]),U=Object(n.useCallback)((function(){d(b.slice(0,-1)||""),a(b[b.length-2]||""),T(L())}),[b,L]),D=Object(n.useCallback)((function(){var t={auth:S,exit:_,write:function(){e("write")}};try{return w(!0),t[b.slice(1,b.length)](),P(),!0}catch(c){return!1}finally{w(!1)}}),[e,P,b]),I=Object(n.useCallback)(Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(":"!==b[0]){e.next=3;break}return D(),e.abrupt("return");case 3:if(x.currentUser){e.next=7;break}return console.error("Not authorized"),P(),e.abrupt("return");case 7:return e.prev=8,w(!0),e.t0=console,e.next=13,g(b);case 13:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.abrupt("return",b);case 16:return e.prev=16,w(!1),P(),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[8,,16,20]])}))),[b,P,D]),B=Object(n.useCallback)((function(e){var t={Escape:P,Backspace:U,Enter:I};try{return t[e](),!0}catch(c){return!1}}),[P,U,I]),F=Object(n.useCallback)((function(e){if(!B(e.key)){a(e.key),/^[a-zA-Z0-9:]+$/.exec(e.key)?(T(L()),d(b+e.key),h(u.f.text)):h(u.f.warn)}}),[b,B,L]);return Object(n.useEffect)((function(){return document.addEventListener("keypress",F),function(){return document.removeEventListener("keypress",F)}}),[F]),Object(C.jsxs)(u.b,{toPosition:m,children:[r&&Object(C.jsx)(u.d,{borderColor:v,children:r}),R&&Object(C.jsx)(u.d,{borderColor:u.f.secondary,children:"Loading..."})]})},T=function(){return Object(C.jsx)(m,{})},A=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(""),o=Object(O.a)(a,2),s=o[0],i=o[1];return Object(C.jsxs)(u.d,{direction:"column",positionY:"center",children:[Object(C.jsx)(u.c,{placeholder:"key",onChange:function(e){var t=e.target;r(t.value)},value:c}),Object(C.jsx)(u.a,{onClick:function(){x.currentUser?c&&s&&(!function(e,t){Object(f.e)(Object(f.d)(k,"users/"+x.currentUser.uid+"/"+btoa(e)),{value:btoa(t)})}(c,s),r(""),i("")):S()},children:":"}),Object(C.jsx)(u.c,{placeholder:"value",onChange:function(e){var t=e.target;i(t.value)},value:s,type:"password"})]})},y=function(){return Object(C.jsx)(s.a,{children:Object(C.jsxs)(i.c,{children:[Object(C.jsx)(i.a,{path:"/",exact:!0,element:Object(C.jsx)(T,{})}),Object(C.jsx)(i.a,{path:"/write",exact:!0,element:Object(C.jsx)(A,{})})]})})};var R=function(){return Object(C.jsx)(u.e,{positionY:"center",children:Object(C.jsx)(y,{})})};o.a.render(Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(R,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.8cb25e35.chunk.js.map